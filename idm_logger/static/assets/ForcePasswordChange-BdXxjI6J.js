import{u as g,r as o,a as m,f as s,h,b as d,k as f,t as x,e as k,o as v,y as P}from"./index-B2Mzflim.js";const _={class:"flex items-center justify-center min-h-screen bg-slate-900 text-slate-200"},y={class:"w-full max-w-md p-8 space-y-6 bg-slate-800 rounded-lg shadow-xl border border-slate-700"},V={class:"space-y-4"},S={key:0,class:"p-3 bg-red-900/50 border border-red-500/50 rounded text-red-200 text-sm"},N={__name:"ForcePasswordChange",setup(B){const w=k(),i=g(),a=o(""),r=o(""),n=o(!1),t=o(""),b=async()=>{if(a.value.length<6){t.value="Passwort muss mindestens 6 Zeichen lang sein";return}if(a.value!==r.value){t.value="Passwörter stimmen nicht überein";return}n.value=!0,t.value="";try{const l=await P.post("/api/config",{new_password:a.value});l.data.success?(await i.checkAuth(),i.mustChangePassword?t.value="Fehler beim Aktualisieren des Status":w.push("/")):t.value=l.data.error||"Fehler beim Ändern des Passworts"}catch(l){t.value=l.response?.data?.error||"Verbindungsfehler"}finally{n.value=!1}};return(l,e)=>{const c=f("Password"),p=f("Button");return v(),m("div",_,[s("div",y,[e[4]||(e[4]=s("div",{class:"text-center"},[s("h1",{class:"text-3xl font-bold text-red-500 mb-2"},"Sicherheitswarnung"),s("p",{class:"text-slate-400"}," Sie verwenden noch das Standardpasswort. Bitte ändern Sie es sofort, um fortzufahren. ")],-1)),s("div",V,[s("div",null,[e[2]||(e[2]=s("label",{class:"block text-sm font-medium mb-1 text-slate-300"},"Neues Passwort",-1)),d(c,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value=u),toggleMask:"",class:"w-full",feedback:!0},null,8,["modelValue"])]),s("div",null,[e[3]||(e[3]=s("label",{class:"block text-sm font-medium mb-1 text-slate-300"},"Passwort bestätigen",-1)),d(c,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=u=>r.value=u),toggleMask:"",class:"w-full",feedback:!1},null,8,["modelValue"])]),t.value?(v(),m("div",S,x(t.value),1)):h("",!0),d(p,{label:"Passwort ändern",onClick:b,loading:n.value,class:"w-full",severity:"danger"},null,8,["loading"])])])])}}};export{N as default};

import{r as i,L as x,N as m,y as g,a as n,f as l,F as _,x as y,o,t as c,n as h}from"./index-iS-CQfgl.js";const b={class:"p-4 flex flex-col gap-4"},k={key:0,class:"flex justify-center"},I={key:1,class:"bg-gray-800 rounded p-4 font-mono text-sm h-[600px] overflow-y-auto"},w={class:"text-gray-400"},L={class:"text-blue-300"},N={class:"text-white ml-2"},B={__name:"Logs",setup(R){const t=i([]),d=i(!0),u=i(null),r=i(0);x(()=>{v(),u.value=setInterval(v,5e3)}),m(()=>{u.value&&clearInterval(u.value)});const v=async()=>{try{const s=r.value>0?`/api/logs?since_id=${r.value}`:"/api/logs",e=await g.get(s);e.data&&e.data.length>0&&(r.value===0?t.value=e.data:t.value=[...e.data,...t.value].slice(0,1e3),t.value.length>0&&(r.value=t.value[0].id||0))}catch(s){console.error("Protokolle konnten nicht abgerufen werden",s)}finally{d.value=!1}},p=s=>{switch(s){case"INFO":return"text-green-400";case"WARNING":return"text-yellow-400";case"ERROR":return"text-red-400";case"CRITICAL":return"text-red-600";default:return"text-gray-400"}};return(s,e)=>(o(),n("div",b,[e[1]||(e[1]=l("h1",{class:"text-2xl font-bold mb-4"},"Systemprotokolle",-1)),d.value&&t.value.length===0?(o(),n("div",k,[...e[0]||(e[0]=[l("i",{class:"pi pi-spin pi-spinner text-4xl"},null,-1)])])):(o(),n("div",I,[(o(!0),n(_,null,y(t.value,(a,f)=>(o(),n("div",{key:a.id||f,class:"mb-1 border-b border-gray-700 pb-1"},[l("span",w,"["+c(a.asctime)+"]",1),l("span",{class:h([p(a.levelname),"mx-2 font-bold"])},c(a.levelname),3),l("span",L,c(a.name)+":",1),l("span",N,c(a.message),1)]))),128))]))]))}};export{B as default};
